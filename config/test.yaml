# 单元测试配置
# 用于 pytest，使用 mock 数据，不需要真实 API 密钥

env: test
debug: true

# JWT 配置
jwt_secret_key: "test-secret-key-for-testing-only"
jwt_algorithm: HS256
jwt_expire_hours: 1

# ============================================================================
# 火山引擎配置 (测试时会被 mock)
# ============================================================================
volcano:
  access_key: test_access_key
  secret_key: test_secret_key
  app_id: "test_app_id"
  cluster_id: test_cluster_id
  tos_bucket: test-bucket
  tos_region: cn-beijing
  api_endpoint: https://openspeech.bytedance.com/api/v1/asr
  boosting_table_id: ""
  max_retries: 3
  timeout: 300

# ============================================================================
# Gemini 配置 (测试时会被 mock)
# ============================================================================
gemini:
  api_keys:
    - test_gemini_key_1
    - test_gemini_key_2
  model: gemini-3-pro-preview
  max_tokens: 60000
  temperature: 0.7
  max_retries: 3
  timeout: 300

# ============================================================================
# Azure 配置 (测试时会被 mock)
# ============================================================================
azure:
  subscription_keys:
    - test_azure_key_1
    - test_azure_key_2
  region: eastus
  max_retries: 3
  timeout: 300

# ============================================================================
# 科大讯飞配置 (测试时会被 mock)
# ============================================================================
iflytek:
  app_id: "test_app_id"
  api_key: test_api_key
  api_secret: test_api_secret
  api_endpoint: https://api.xf-yun.com/v1/private/test
  group_id: test_group
  max_retries: 3
  timeout: 30

# ============================================================================
# 数据库配置 - SQLite
# ============================================================================
database:
  host: ""
  port: 0
  username: ""
  password: ""
  database: ":memory:"  # 使用内存数据库
  pool_size: 5
  max_overflow: 10
  echo: false

# ============================================================================
# Redis 配置
# ============================================================================
redis:
  host: localhost
  port: 6379
  password: ""
  db: 0
  max_connections: 10

# ============================================================================
# 日志配置
# ============================================================================
log:
  level: INFO
  format: json
  output: stdout
  filter_sensitive: true

# ============================================================================
# 存储配置 (测试时会被 mock)
# ============================================================================
storage:
  provider: tos
  bucket: test-bucket
  region: cn-beijing
  access_key: test_access_key
  secret_key: test_secret_key
  temp_file_ttl: 3600

# ============================================================================
# 价格配置
# ============================================================================
pricing:
  # ASR 价格 (元/秒)
  volcano_asr_per_second: 0.00005
  azure_asr_per_second: 0.00006
  
  # 声纹识别价格 (元/秒)
  iflytek_voiceprint_per_second: 0.00003
  
  # LLM 价格 (元/Token)
  gemini_flash_per_token: 0.00002
  gemini_pro_per_token: 0.00005
  
  # 估算参数
  estimated_tokens_per_second: 10
  estimated_speakers_count: 3
  estimated_sample_duration: 5.0

# ============================================================================
# 业务配置
# ============================================================================
audio_retention_days: 7
enable_speaker_recognition: true
default_asr_provider: volcano
