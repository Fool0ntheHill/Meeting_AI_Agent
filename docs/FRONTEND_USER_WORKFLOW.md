# å‰ç«¯ç”¨æˆ·å·¥ä½œæµç¨‹è¯¦è§£

**åŸºäºå®é™…ç”¨æˆ·åœºæ™¯çš„å®Œæ•´å·¥ä½œæµç¨‹**

---

## ğŸ“‹ å®Œæ•´ç”¨æˆ·æ—…ç¨‹

### é˜¶æ®µä¸€ï¼šç‰©ç†å½•åˆ¶ä¸å®‰å…¨ä¼ è¾“

#### 1.1 ä¼šè®®å½•åˆ¶
- **è®¾å¤‡**ï¼šç§‘å¤§è®¯é£ SR302 å½•éŸ³ç¬”
- **æ–‡ä»¶å‘½å**ï¼šè‡ªåŠ¨ä»¥æ—¶é—´å’Œé¡ºåºå‘½åï¼ˆå¦‚ `2026å¹´01æœˆ12æ—¥_1.opus`ï¼‰
- **å¼‚å¸¸å¤„ç†**ï¼šä¸­é€”ä¸­æ–­ä¼šç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼ˆ`_1`, `_2`, `_3`ï¼‰

#### 1.2 ç‰©ç†æŒ‚è½½
- **è¿æ¥æ–¹å¼**ï¼šUSB æ•°æ®çº¿è¿æ¥è‡³ç”µè„‘ï¼ˆç¦»çº¿æ¨¡å¼ï¼‰
- **æ–‡ä»¶æ ¼å¼**ï¼šä¼˜å…ˆä½¿ç”¨ `.opus` æ ¼å¼ï¼ˆå¦‚æ•ˆæœä¸ä½³åˆ™ç”¨ `.wav`ï¼‰
- **ä¼ è¾“é€Ÿåº¦**ï¼šçº¦ 25MB/sï¼ˆ2å°æ—¶ä¼šè®® wav æ–‡ä»¶çº¦ 10 ç§’ä¼ è¾“å®Œæˆï¼‰

---

### é˜¶æ®µäºŒï¼šæ™ºèƒ½é…ç½®ä¸ä¸Šä¼ 

#### 2.1 ç™»å½•ç³»ç»Ÿ
**é¡µé¢**: ä¼šè®® Agent Home Pageï¼ˆå…¬å¸å†…ç½‘ï¼‰

**è®¤è¯æ–¹å¼**: ä¼ä¸šå¾®ä¿¡æ‰«ç ç™»å½•

```typescript
// å‰ç«¯å®ç°è¦ç‚¹
interface WeChatLoginResponse {
  access_token: string;
  user_id: string;
  tenant_id: string;
  user_name: string;
  department: string;
}

// æ‰«ç ç™»å½•æµç¨‹
1. æ˜¾ç¤ºä¼ä¸šå¾®ä¿¡äºŒç»´ç 
2. ç”¨æˆ·æ‰«ç æˆæƒ
3. è·å– access_token
4. è·³è½¬åˆ°ä¸»é¡µé¢
```

**UI å¸ƒå±€**: ç±»ä¼¼ LLM Web ç«¯çš„å¸ƒå±€

#### 2.2 åˆ›å»ºæ–°çºªè¦
**å…¥å£**: ç‚¹å‡»"ç”Ÿæˆæ–°çš„ä¼šè®®çºªè¦"æŒ‰é’®

#### 2.3 æ–‡ä»¶ä¸Šä¼ ä¸æ’åº
**äº¤äº’æ–¹å¼**: æ‹–æ‹½ä¸Šä¼ 

**åŠŸèƒ½è¦æ±‚**:
- âœ… æ”¯æŒæ‹–æ‹½ä¸€ä¸ªæˆ–å¤šä¸ªéŸ³é¢‘æ–‡ä»¶åˆ°ä¸Šä¼ åŒº
- âœ… æ”¯æŒæ‹–æ‹½æ’åºï¼ˆPart 1, Part 2, Part 3ï¼‰
- âœ… åå°è‡ªåŠ¨æŒ‰é¡ºåºæ‹¼æ¥æˆå®Œæ•´éŸ³é¢‘
- âœ… æ˜¾ç¤ºæ–‡ä»¶åã€å¤§å°ã€æ—¶é•¿
- âœ… æ”¯æŒåˆ é™¤å·²ä¸Šä¼ æ–‡ä»¶

```typescript
interface AudioFileUpload {
  file: File;
  order: number;  // æ‹¼æ¥é¡ºåº
  file_path?: string;  // ä¸Šä¼ åçš„è·¯å¾„
  duration?: number;  // éŸ³é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰
  size: number;  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
}

// æ‹–æ‹½æ’åºç¤ºä¾‹
const [audioFiles, setAudioFiles] = useState<AudioFileUpload[]>([]);

function handleDrop(files: File[]) {
  const newFiles = files.map((file, index) => ({
    file,
    order: audioFiles.length + index,
    size: file.size,
  }));
  setAudioFiles([...audioFiles, ...newFiles]);
}

function handleReorder(fromIndex: number, toIndex: number) {
  const reordered = [...audioFiles];
  const [moved] = reordered.splice(fromIndex, 1);
  reordered.splice(toIndex, 0, moved);
  
  // æ›´æ–° order
  reordered.forEach((file, index) => {
    file.order = index;
  });
  
  setAudioFiles(reordered);
}
```

#### 2.4 é€‰æ‹©æç¤ºè¯æ¨¡æ¿
**å…³é”®æ­¥éª¤**: é€‰æ‹©æˆ–åˆ›å»ºæç¤ºè¯æ¨¡æ¿

##### 2.4.1 æç¤ºè¯æ¨¡æ¿æ¥æº

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ¨¡æ¿**

ç³»ç»Ÿæä¾› 6 ç§é¢„è®¾æ¨¡æ¿ï¼ˆä¼˜å…ˆçº§ P2ï¼‰:

| å›¾æ ‡ | ç±»å‹ | ä¾§é‡ç‚¹ | æ¨¡æ¿ ID |
|------|------|--------|---------|
| ğŸƒ | é€šç”¨ä¼šè®®ï¼ˆé»˜è®¤ï¼‰ | å…¨é¢è®°å½•è®®é¢˜è„‰ç»œã€æ ¸å¿ƒè®¨è®ºã€ç»“è®ºä¸å¾…åŠ | `global_general_meeting_v1` |
| ğŸ§  | å¤´è„‘é£æš´ | åˆ›æ„ç‚¹ç½—åˆ—ã€æ€ç»´å»¶ä¼¸äº®ç‚¹ã€ç­›é€‰å»ºè®® | `global_brainstorming_v1` |
| ğŸ¤ | é¢è¯•/HR | å€™é€‰äººç»å†ã€å›ç­”é€»è¾‘ã€ç»¼åˆè¯„ä»· | `global_interview_v1` |
| ğŸš€ | æ¯æ—¥ç«™ä¼š | æ˜¨æ—¥è¿›åº¦ã€ä»Šæ—¥è®¡åˆ’ã€é˜»ç¢/é£é™© | `global_daily_standup_v1` |
| ğŸ“Š | å‘¨ä¼š | é‡Œç¨‹ç¢‘ã€æ•°æ®æŒ‡æ ‡ã€ä¸‹å‘¨å®‰æ’ | `global_weekly_meeting_v1` |
| ğŸ“ | éœ€æ±‚è¯„å®¡ | ç¡®è®¤åŠŸèƒ½ç‚¹ã€å¦å†³éœ€æ±‚ã€é—ç•™é—®é¢˜ | `global_requirement_review_v1` |

**æ–¹å¼äºŒï¼šä»æç¤ºè¯æ¨¡æ¿å¹¿åœºé€‰æ‹©**

**å…¥å£**: ç‚¹å‡»"æµè§ˆæ¨¡æ¿å¹¿åœº"æŒ‰é’®

**åŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰æœ‰æƒé™çš„æç¤ºè¯æ¨¡æ¿ï¼ˆç³»ç»Ÿæ¨¡æ¿ + ä¸ªäººæ¨¡æ¿ï¼‰
- é¢„è§ˆæ¨¡æ¿è¯¦æƒ…å’Œç¤ºä¾‹è¾“å‡º
- é€‰æ‹©æ¨¡æ¿åº”ç”¨åˆ°å½“å‰ä»»åŠ¡

```typescript
interface PromptTemplate {
  template_id: string;
  title: string;
  description: string;
  icon?: string;
  artifact_type: string;  // meeting_minutes, action_items, etc.
  scope: 'global' | 'private';  // ç³»ç»Ÿæ¨¡æ¿ or ä¸ªäººæ¨¡æ¿
  is_system: boolean;
  supported_languages: string[];
  parameter_schema: Record<string, any>;
  created_at: string;
  usage_count?: number;  // ä½¿ç”¨æ¬¡æ•°
}

// è·å–å¯ç”¨æ¨¡æ¿åˆ—è¡¨
async function getAvailableTemplates(): Promise<PromptTemplate[]> {
  // è·å–ç³»ç»Ÿæ¨¡æ¿
  const globalTemplates = await api.listPromptTemplates({ scope: 'global' });
  
  // è·å–ä¸ªäººæ¨¡æ¿
  const privateTemplates = await api.listPromptTemplates({ 
    scope: 'private',
    user_id: currentUser.id 
  });
  
  return [...globalTemplates, ...privateTemplates];
}
```

**æ–¹å¼ä¸‰ï¼šåˆ›å»ºæ–°çš„æç¤ºè¯æ¨¡æ¿**

**å…¥å£**: ç‚¹å‡»"åˆ›å»ºæ–°æ¨¡æ¿"æŒ‰é’®

**æµç¨‹**:
1. é€‰æ‹©åŸºç¡€æ¨¡æ¿ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä»ç©ºç™½å¼€å§‹ï¼‰
2. ç¼–è¾‘æç¤ºè¯å†…å®¹
3. è®¾ç½®æ¨¡æ¿åç§°å’Œæè¿°
4. ä¿å­˜ä¸ºä¸ªäººæ¨¡æ¿

```typescript
interface CreateTemplateRequest {
  title: string;
  description?: string;
  prompt_body: string;  // æç¤ºè¯æ­£æ–‡
  artifact_type: string;
  supported_languages: string[];
  parameter_schema: Record<string, any>;
}

async function createTemplate(data: CreateTemplateRequest) {
  const response = await api.createPromptTemplate(data);
  return response.template_id;
}
```

##### 2.4.2 æ¨¡æ¿é€‰æ‹©ç•Œé¢

**UI å¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©æç¤ºè¯æ¨¡æ¿                    [åˆ›å»ºæ–°æ¨¡æ¿]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç³»ç»Ÿæ¨¡æ¿] [æˆ‘çš„æ¨¡æ¿] [æœ€è¿‘ä½¿ç”¨]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸƒ       â”‚  â”‚ ğŸ§        â”‚  â”‚ ğŸ¤       â”‚          â”‚
â”‚  â”‚ é€šç”¨ä¼šè®®  â”‚  â”‚ å¤´è„‘é£æš´  â”‚  â”‚ é¢è¯•/HR  â”‚          â”‚
â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚          â”‚
â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ ğŸ“       â”‚  â”‚ ğŸ“Š       â”‚                        â”‚
â”‚  â”‚ æŠ€æœ¯è¯„å®¡  â”‚  â”‚ äº§å“è§„åˆ’  â”‚                        â”‚
â”‚  â”‚ æˆ‘çš„æ¨¡æ¿  â”‚  â”‚ æˆ‘çš„æ¨¡æ¿  â”‚                        â”‚
â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [ç¼–è¾‘]   â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’ç»†èŠ‚**:
- æ‚¬åœå¡ç‰‡æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆæè¿°ã€å‚æ•°ã€ç¤ºä¾‹ï¼‰
- ç‚¹å‡»"é€‰æ‹©"åº”ç”¨æ¨¡æ¿
- ç‚¹å‡»"ç¼–è¾‘"ï¼ˆä»…ä¸ªäººæ¨¡æ¿ï¼‰è¿›å…¥ç¼–è¾‘æ¨¡å¼
- æ”¯æŒæœç´¢å’Œç­›é€‰

##### 2.4.3 æ¨¡æ¿ç¼–è¾‘ä¸ä¿å­˜

**åœºæ™¯ä¸€ï¼šåŸºäºé€‰ä¸­æ¨¡æ¿ä¿®æ”¹**

ç”¨æˆ·é€‰æ‹©æ¨¡æ¿åï¼Œå¯ä»¥åœ¨å½“å‰é¡µé¢ä¿®æ”¹æç¤ºè¯å†…å®¹ï¼š

```typescript
interface PromptEditorState {
  base_template_id: string;  // åŸºç¡€æ¨¡æ¿ ID
  current_prompt: string;  // å½“å‰æç¤ºè¯å†…å®¹
  is_modified: boolean;  // æ˜¯å¦å·²ä¿®æ”¹
  parameters: Record<string, any>;  // å‚æ•°å€¼
}

// ä¿®æ”¹æç¤ºè¯
function handlePromptEdit(newPrompt: string) {
  setPromptEditor({
    ...promptEditor,
    current_prompt: newPrompt,
    is_modified: true,
  });
}

// ä¿å­˜ä¸ºæ–°æ¨¡æ¿
async function saveAsNewTemplate() {
  const newTemplate = await api.createPromptTemplate({
    title: `${baseTemplate.title} - è‡ªå®šä¹‰`,
    description: 'åŸºäºç³»ç»Ÿæ¨¡æ¿ä¿®æ”¹',
    prompt_body: promptEditor.current_prompt,
    artifact_type: baseTemplate.artifact_type,
    supported_languages: baseTemplate.supported_languages,
    parameter_schema: baseTemplate.parameter_schema,
  });
  
  showToast('âœ… å·²ä¿å­˜ä¸ºæ–°æ¨¡æ¿');
  return newTemplate.template_id;
}
```

**åœºæ™¯äºŒï¼šåœ¨å·¥ä½œå°ä¸­ä¿®æ”¹å¹¶ä¿å­˜**

åœ¨é˜¶æ®µå››çš„å·¥ä½œå°ä¸­ï¼Œç”¨æˆ·å¯ä»¥ï¼š
1. æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æç¤ºè¯æ¨¡æ¿
2. ç‚¹å‡»"ç¼–è¾‘æç¤ºè¯"æŒ‰é’®
3. ä¿®æ”¹æç¤ºè¯å†…å®¹
4. é€‰æ‹©"ä»…æœ¬æ¬¡ä½¿ç”¨"æˆ–"ä¿å­˜ä¸ºæ–°æ¨¡æ¿"

```typescript
// å·¥ä½œå°ä¸­çš„æç¤ºè¯ç¼–è¾‘
interface WorkbenchPromptEditor {
  show_editor: boolean;
  current_template: PromptTemplate;
  modified_prompt: string;
}

// é‡æ–°ç”Ÿæˆæ—¶å¯é€‰æ‹©ä¿å­˜
async function regenerateWithModifiedPrompt(saveAsTemplate: boolean) {
  let template_id = currentTemplate.template_id;
  
  if (saveAsTemplate) {
    // ä¿å­˜ä¸ºæ–°æ¨¡æ¿
    const newTemplate = await api.createPromptTemplate({
      title: `${currentTemplate.title} - ä¿®æ”¹ç‰ˆ`,
      prompt_body: modifiedPrompt,
      // ... å…¶ä»–å­—æ®µ
    });
    template_id = newTemplate.template_id;
  }
  
  // ä½¿ç”¨æ–°æç¤ºè¯é‡æ–°ç”Ÿæˆ
  await api.regenerateArtifact(taskId, 'meeting_minutes', {
    prompt_instance: {
      template_id: template_id,
      language: 'zh-CN',
      parameters: currentParameters,
    },
  });
}
```

##### 2.4.4 æç¤ºè¯å‚æ•°é…ç½®

**åŠŸèƒ½**: ä¸ºæç¤ºè¯æ¨¡æ¿å¡«å……å‚æ•°

**ç¤ºä¾‹å‚æ•°**:
```typescript
interface PromptParameters {
  meeting_description?: string;  // ä¼šè®®æè¿°
  focus_points?: string;  // å…³æ³¨é‡ç‚¹
  output_format?: string;  // è¾“å‡ºæ ¼å¼è¦æ±‚
  custom_instructions?: string;  // è‡ªå®šä¹‰æŒ‡ä»¤
}

// å‚æ•°è¾“å…¥ç•Œé¢
<PromptParameterForm>
  <Input
    label="ä¼šè®®æè¿°"
    placeholder="ä¾‹å¦‚ï¼šäº§å“è§„åˆ’ä¼šè®®ï¼Œè®¨è®º Q2 è·¯çº¿å›¾"
    value={parameters.meeting_description}
    onChange={(v) => setParameters({...parameters, meeting_description: v})}
  />
  
  <TextArea
    label="å…³æ³¨é‡ç‚¹"
    placeholder="ä¾‹å¦‚ï¼šé‡ç‚¹è®°å½•æŠ€æœ¯å†³ç­–å’Œé£é™©ç‚¹"
    value={parameters.focus_points}
    onChange={(v) => setParameters({...parameters, focus_points: v})}
  />
</PromptParameterForm>
```

#### 2.5 ç¡®è®¤é…ç½®å¹¶å¼€å§‹å¤„ç†

**æœ€ç»ˆç¡®è®¤ç•Œé¢**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¡®è®¤ä»»åŠ¡é…ç½®                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  éŸ³é¢‘æ–‡ä»¶: 3 ä¸ªæ–‡ä»¶ï¼Œæ€»æ—¶é•¿ 1å°æ—¶23åˆ†                â”‚
â”‚  æç¤ºè¯æ¨¡æ¿: é€šç”¨ä¼šè®® (global_general_meeting_v1)   â”‚
â”‚  ä¼šè®®æè¿°: äº§å“è§„åˆ’ä¼šè®®                              â”‚
â”‚  è¾“å‡ºè¯­è¨€: ä¸­æ–‡                                      â”‚
â”‚                                                     â”‚
â”‚  [è¿”å›ä¿®æ”¹]  [å¼€å§‹æ•´ç†]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.6 å¼€å§‹å¤„ç†
**æŒ‰é’®**: "å¼€å§‹æ•´ç†"

**è¡Œä¸º**:
- æ–‡ä»¶è¿›å…¥åå°é˜Ÿåˆ—
- ç”¨æˆ·å¯å…³é—­é¡µé¢
- ä¹Ÿå¯ç•™åœ¨é¡µé¢æŸ¥çœ‹è¿›åº¦æ¡

**é»˜è®¤ç­–ç•¥**:
- ASR è¯­è¨€ï¼šä¸­è‹±æ–‡æ··åˆè½¬å†™ï¼ˆè‡ªåŠ¨ï¼‰
- è¾“å‡ºè¯­è¨€ï¼šä¸­æ–‡ä¸ºä¸»ï¼Œè‹±æ–‡æŠ€æœ¯åè¯ä¿ç•™

**å¤±è´¥é‡è¯•**:
- ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤ºå¤±è´¥åŸå› 
- ä¼ä¸šå¾®ä¿¡é€šçŸ¥å¤±è´¥
- æ”¯æŒå®‰å…¨é‡è¯•

---

### é˜¶æ®µä¸‰ï¼šå¼‚æ­¥å¤„ç†ä¸é€šçŸ¥

#### 3.1 åå°å¤„ç†æµç¨‹
**é»‘ç›’å¤„ç†**:
1. ç«å±±å¼•æ“ ASRï¼ˆè½¬æ–‡å­—ï¼‰
2. è®¯é£ SearchFeaï¼ˆåŒºåˆ†è¯´è¯äººï¼‰
3. Gemini 3.0 Proï¼ˆç”Ÿæˆæ‘˜è¦ï¼‰

**å…œåº•é€»è¾‘**:
- ç«å±±å¼•æ“æ•æ„Ÿè¯å¤±è´¥ â†’ è‡ªåŠ¨åˆ‡æ¢ Azure

**é¢„è®¡æ—¶é—´**: ä¼šè®®æ—¶é•¿çš„ 20%

#### 3.2 ä¼ä¸šå¾®ä¿¡é€šçŸ¥
**è§¦è¾¾æ–¹å¼**: ä¼ä¸šå¾®ä¿¡ Bot å‘é€æ¨¡æ¿å¡ç‰‡

**å¡ç‰‡å†…å®¹**:
- ä¼šè®®åç§°
- ä¼šè®®æ—¶é—´
- ä¼šè®®çºªè¦é“¾æ¥
- æ‘˜è¦ï¼ˆ50 å­—ï¼‰

```typescript
interface WeChatNotification {
  title: string;  // ä¼šè®®åç§°
  meeting_time: string;
  link: string;  // çºªè¦é“¾æ¥
  summary: string;  // 50å­—æ‘˜è¦
  status: 'success' | 'failed';
}
```

---

### é˜¶æ®µå››ï¼šäººæœºååŒå·¥ä½œå°

**æ ¸å¿ƒç›®æ ‡**: æ ¡å¯¹ä¸ä¼˜åŒ–ï¼ˆç”¨æˆ·åœç•™æ—¶é—´æœ€é•¿çš„ç•Œé¢ï¼‰

#### 4.1 å¸ƒå±€è®¾è®¡
**å·¦å³åˆ†å±å¸ƒå±€**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† è¿”å›ä»»åŠ¡åˆ—è¡¨]  ä¼šè®®çºªè¦å·¥ä½œå°  [ä¿å­˜] [å¯¼å‡º]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                                  â”‚
â”‚  å·¦ä¾§ï¼šäº‹å®å±‚         â”‚  å³ä¾§ï¼šæ™ºèƒ½å±‚                     â”‚
â”‚  (éŸ³é¢‘ + é€å­—ç¨¿)      â”‚  (AI çºªè¦)                       â”‚
â”‚                      â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ éŸ³é¢‘æ³¢å½¢å›¾      â”‚  â”‚  â”‚ [é€å­—ç¨¿] [ä¼šè®®çºªè¦] [+]    â”‚ â”‚
â”‚  â”‚ â–¶ â”â”â”â”â”â”â”â”â”â”â” â”‚  â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ 00:12:30       â”‚  â”‚  â”‚ # ä¼šè®®çºªè¦                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                            â”‚ â”‚
â”‚                      â”‚  â”‚ ## ä¼šè®®æ¦‚è¦                â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ ...                        â”‚ â”‚
â”‚  â”‚ [00:00:00]     â”‚  â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ å¼ ä¸‰: å¤§å®¶å¥½... â”‚  â”‚  â”‚ ## å…³é”®è¦ç‚¹                â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â”‚ 1. ...                     â”‚ â”‚
â”‚  â”‚ [00:00:15]     â”‚  â”‚  â”‚ 2. ...                     â”‚ â”‚
â”‚  â”‚ æå››: æˆ‘è®¤ä¸º... â”‚  â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â”‚ ## è¡ŒåŠ¨é¡¹                  â”‚ â”‚
â”‚  â”‚ [ç¼–è¾‘è¯´è¯äºº]    â”‚  â”‚  â”‚ - [ ] ...                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                  â”‚
â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚  â”‚ â–¡ å·²å®Œæ•´é˜…è¯»å¹¶ç¡®è®¤æ— è¯¯      â”‚ â”‚
â”‚                      â”‚  â”‚ [ä¸€é”®å¤åˆ¶å…¨éƒ¨] (ç°è‰²)       â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2 å·¦ä¾§ï¼šäº‹å®å±‚

##### éŸ³é¢‘æ’­æ”¾å™¨
**åŠŸèƒ½**:
- æ˜¾ç¤ºéŸ³é¢‘æ³¢å½¢å›¾
- æ’­æ”¾/æš‚åœæ§åˆ¶
- è¿›åº¦æ¡æ‹–æ‹½
- æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚ï¼ˆ0.5x, 1x, 1.5x, 2xï¼‰

##### éŸ³å­—åŒæ­¥
**æ—¶é—´æˆ³è·³è½¬**:
- ç‚¹å‡»æ®µè½å‰çš„ `[00:12:30]`
- éŸ³é¢‘æ’­æ”¾å™¨ç«‹å³è·³è½¬åˆ°è¯¥æ—¶åˆ»å¹¶æ’­æ”¾

```typescript
interface TranscriptSegment {
  start_time: number;  // ç§’
  end_time: number;
  speaker: string;
  text: string;
}

function handleTimestampClick(timestamp: number) {
  audioPlayer.currentTime = timestamp;
  audioPlayer.play();
}
```

##### æ–‡æœ¬ç¼–è¾‘
**äº¤äº’è§„åˆ™**:
- å·¦é”®å•å‡»ï¼šæ”¾ç½®å…‰æ ‡ï¼ˆæ’å…¥/ä¿®æ”¹ï¼‰
- å·¦é”®åŒå‡»ï¼šé€‰ä¸­è¯è¯­ï¼ˆå¤åˆ¶/åˆ é™¤ï¼‰
- æ”¯æŒä¿®æ”¹é”™åˆ«å­—
- **ä¸æ”¯æŒä¿®æ”¹æ—¶é—´è½´**

```typescript
// ç¼–è¾‘é€å­—ç¨¿
function handleTranscriptEdit(segmentId: string, newText: string) {
  // æ›´æ–°æœ¬åœ°çŠ¶æ€
  updateSegment(segmentId, { text: newText });
  
  // æ ‡è®°ä¸ºå·²ä¿®æ”¹ï¼ˆç”¨äº Dirty Checkï¼‰
  setIsModified(true);
}
```

##### è¯´è¯äººä¿®æ­£
**äº¤äº’æ–¹å¼**: å·¦é”®å•å‡»è¯´è¯äººåå­—ï¼Œå¼¹å‡ºæ°”æ³¡èœå•

**é€‰é¡¹**:
1. **ä»…ä¿®æ”¹æ­¤å¤„**: åªä¿®æ­£å½“å‰è¿™ä¸€å¥
2. **å…¨å±€é‡å‘½å**: æ‰¹é‡ä¿®æ”¹æ‰€æœ‰è¯¥è¯´è¯äººçš„åå­—

```typescript
interface SpeakerCorrectionMenu {
  segment_id: string;
  current_speaker: string;
  options: [
    {
      label: 'ä»…ä¿®æ”¹æ­¤å¤„',
      action: 'single'
    },
    {
      label: 'å…¨å±€é‡å‘½å',
      action: 'global'
    }
  ];
}

function handleSpeakerCorrection(
  action: 'single' | 'global',
  segmentId: string,
  newName: string
) {
  if (action === 'single') {
    // åªä¿®æ”¹å½“å‰æ®µè½
    updateSegment(segmentId, { speaker: newName });
  } else {
    // å…¨å±€é‡å‘½å
    const oldName = getSegment(segmentId).speaker;
    updateAllSpeakers(oldName, newName);
  }
  
  setIsModified(true);
}
```

#### 4.3 å³ä¾§ï¼šæ™ºèƒ½å±‚

##### Tabs æ 
**åŠŸèƒ½**: å¤šé¡µé¢ç®¡ç†

**é»˜è®¤ Tabs**:
- `[é€å­—ç¨¿]` - è‡ªåŠ¨ç”Ÿæˆ
- `[ä¼šè®®çºªè¦]` - è‡ªåŠ¨ç”Ÿæˆ
- `[+]` - æ·»åŠ æ–°é¡µé¢ï¼ˆä½¿ç”¨æ¨¡æ¿ï¼‰

```typescript
interface EditorTab {
  id: string;
  title: string;
  type: 'transcript' | 'minutes' | 'custom';
  content: string;
  is_modified: boolean;
}

const [tabs, setTabs] = useState<EditorTab[]>([
  { id: 'tab1', title: 'é€å­—ç¨¿', type: 'transcript', content: '...', is_modified: false },
  { id: 'tab2', title: 'ä¼šè®®çºªè¦', type: 'minutes', content: '...', is_modified: false },
]);
```

##### ç¼–è¾‘æ¨¡å¼åˆ‡æ¢
**æŒ‰é’®**: `[âœï¸ æ‰‹åŠ¨ç¼–è¾‘]`

**æ¨¡å¼**:
1. **Markdown ä»£ç æ¨¡å¼**: ç›´æ¥ç¼–è¾‘ Markdown æºç 
2. **æ‰€è§å³æ‰€å¾—é˜…è¯»æ¨¡å¼**: æ¸²æŸ“åçš„æ•ˆæœ

**å›¾ç‰‡æ”¯æŒ**:
- æ”¯æŒæ‰‹åŠ¨æ’å…¥å›¾ç‰‡
- ä¸¤ç§æ¨¡å¼ä¸‹éƒ½èƒ½æ˜¾ç¤º

```typescript
type EditorMode = 'markdown' | 'wysiwyg';

const [editorMode, setEditorMode] = useState<EditorMode>('wysiwyg');

function toggleEditorMode() {
  setEditorMode(mode => mode === 'markdown' ? 'wysiwyg' : 'markdown');
}
```

##### AI è¿­ä»£ä¸ç‰ˆæœ¬ç®¡ç†

**é‡æ–°ç”Ÿæˆ**:
- æŒ‰é’®ï¼š`[ğŸ”„ é‡æ–°ç”Ÿæˆ]`
- åŸºäºå·¦ä¾§ï¼ˆå¯èƒ½å·²ä¿®æ­£ï¼‰çš„é€å­—ç¨¿
- å¯é€‰æ‹©ä¸åŒçš„æç¤ºè¯æ¨¡æ¿
- é‡æ–°è°ƒç”¨ Gemini ç”Ÿæˆçºªè¦
- ä¸è¦†ç›–å½“å‰å†…å®¹ï¼Œä½œä¸ºæ–°ç‰ˆæœ¬å­˜å…¥

**é‡æ–°ç”Ÿæˆæµç¨‹**:

```typescript
// 1. ç‚¹å‡»é‡æ–°ç”ŸæˆæŒ‰é’®
function handleRegenerateClick() {
  // æ˜¾ç¤ºæç¤ºè¯é€‰æ‹©å¯¹è¯æ¡†
  setShowTemplateSelector(true);
}

// 2. é€‰æ‹©æç¤ºè¯æ¨¡æ¿
interface RegenerateOptions {
  template_id: string;
  template_title: string;
  parameters: Record<string, any>;
  modified_prompt?: string;  // å¦‚æœç”¨æˆ·ä¿®æ”¹äº†æç¤ºè¯
}

async function regenerateWithTemplate(options: RegenerateOptions) {
  // è·å–å½“å‰é€å­—ç¨¿ï¼ˆå¯èƒ½å·²ä¿®æ­£ï¼‰
  const transcript = getCurrentTranscript();
  
  // è°ƒç”¨ API é‡æ–°ç”Ÿæˆ
  const response = await api.regenerateArtifact(taskId, 'meeting_minutes', {
    prompt_instance: {
      template_id: options.template_id,
      language: 'zh-CN',
      parameters: options.parameters,
    },
  });
  
  // åˆ›å»ºæ–°ç‰ˆæœ¬ Tab
  const newTab = {
    id: `tab_${Date.now()}`,
    title: `${options.template_title} v${version + 1}`,
    type: 'minutes',
    content: response.content,
    template_id: options.template_id,
    is_modified: false,
  };
  
  setTabs([...tabs, newTab]);
  setActiveTab(newTab.id);
}
```

**æç¤ºè¯æ¨¡æ¿é€‰æ‹©å¯¹è¯æ¡†**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‡æ–°ç”Ÿæˆä¼šè®®çºªè¦                    [Ã—]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€‰æ‹©æç¤ºè¯æ¨¡æ¿:                                     â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸƒ       â”‚  â”‚ ğŸ§        â”‚  â”‚ ğŸ“       â”‚          â”‚
â”‚  â”‚ é€šç”¨ä¼šè®®  â”‚  â”‚ å¤´è„‘é£æš´  â”‚  â”‚ æŠ€æœ¯è¯„å®¡  â”‚          â”‚
â”‚  â”‚ (å½“å‰)   â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚  â”‚ æˆ‘çš„æ¨¡æ¿  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                     â”‚
â”‚  [æµè§ˆæ›´å¤šæ¨¡æ¿...]                                   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æç¤ºè¯é¢„è§ˆ:                                  â”‚   â”‚
â”‚  â”‚ ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä¼šè®®çºªè¦åŠ©æ‰‹...                â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚ [ç¼–è¾‘æç¤ºè¯]                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  ä¼šè®®æè¿°: [äº§å“è§„åˆ’ä¼šè®®                    ]        â”‚
â”‚  å…³æ³¨é‡ç‚¹: [æŠ€æœ¯å†³ç­–å’Œé£é™©ç‚¹                ]        â”‚
â”‚                                                     â”‚
â”‚  â–¡ ä¿å­˜ä¿®æ”¹åçš„æç¤ºè¯ä¸ºæ–°æ¨¡æ¿                        â”‚
â”‚                                                     â”‚
â”‚  [å–æ¶ˆ]  [å¼€å§‹ç”Ÿæˆ]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¼–è¾‘æç¤ºè¯åŠŸèƒ½**:

```typescript
interface PromptEditorDialog {
  show: boolean;
  base_template: PromptTemplate;
  current_prompt: string;
  is_modified: boolean;
  save_as_new: boolean;
  new_template_name?: string;
}

// ç¼–è¾‘æç¤ºè¯
function handleEditPrompt() {
  setPromptEditor({
    show: true,
    base_template: currentTemplate,
    current_prompt: currentTemplate.prompt_body,
    is_modified: false,
    save_as_new: false,
  });
}

// ä¿å­˜å¹¶ç”Ÿæˆ
async function saveAndRegenerate() {
  let template_id = promptEditor.base_template.template_id;
  
  // å¦‚æœä¿®æ”¹äº†æç¤ºè¯ä¸”é€‰æ‹©ä¿å­˜ä¸ºæ–°æ¨¡æ¿
  if (promptEditor.is_modified && promptEditor.save_as_new) {
    const newTemplate = await api.createPromptTemplate({
      title: promptEditor.new_template_name || `${promptEditor.base_template.title} - ä¿®æ”¹ç‰ˆ`,
      description: `åŸºäº ${promptEditor.base_template.title} ä¿®æ”¹`,
      prompt_body: promptEditor.current_prompt,
      artifact_type: promptEditor.base_template.artifact_type,
      supported_languages: promptEditor.base_template.supported_languages,
      parameter_schema: promptEditor.base_template.parameter_schema,
    });
    
    template_id = newTemplate.template_id;
    showToast('âœ… å·²ä¿å­˜ä¸ºæ–°æ¨¡æ¿');
  }
  
  // ä½¿ç”¨é€‰å®šçš„æ¨¡æ¿é‡æ–°ç”Ÿæˆ
  await regenerateWithTemplate({
    template_id: template_id,
    template_title: promptEditor.base_template.title,
    parameters: currentParameters,
  });
}
```

**ç‰ˆæœ¬åˆ‡æ¢**:
- Tabs æ æ˜¾ç¤ºæ‰€æœ‰ç‰ˆæœ¬
- æ¯ä¸ª Tab æ˜¾ç¤ºä½¿ç”¨çš„æ¨¡æ¿åç§°
- ç‚¹å‡»åˆ‡æ¢æŸ¥çœ‹ä¸åŒç‰ˆæœ¬
- é¿å…è¯¯æ“ä½œä¸¢å¤±å†…å®¹

```typescript
interface EditorTab {
  id: string;
  title: string;
  type: 'transcript' | 'minutes' | 'custom';
  content: string;
  template_id?: string;  // ä½¿ç”¨çš„æ¨¡æ¿ ID
  template_title?: string;  // æ¨¡æ¿åç§°
  version?: number;  // ç‰ˆæœ¬å·
  is_modified: boolean;
  created_at: string;
}

// Tab æ˜¾ç¤ºç¤ºä¾‹
// [é€å­—ç¨¿] [é€šç”¨ä¼šè®® v1] [æŠ€æœ¯è¯„å®¡ v2] [å¤´è„‘é£æš´ v3] [+]
```

**æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯**:

åœ¨ç¼–è¾‘å™¨é¡¶éƒ¨æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ä½¿ç”¨çš„æ¨¡æ¿ä¿¡æ¯ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é€å­—ç¨¿] [ä¼šè®®çºªè¦ v1] [ä¼šè®®çºªè¦ v2*] [+]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â„¹ï¸ å½“å‰ç‰ˆæœ¬ä½¿ç”¨: é€šç”¨ä¼šè®®æ¨¡æ¿ (global_general_meeting_v1) â”‚
â”‚  [æŸ¥çœ‹æç¤ºè¯] [åˆ‡æ¢æ¨¡æ¿é‡æ–°ç”Ÿæˆ]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  # ä¼šè®®çºªè¦                                          â”‚
â”‚  ...                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### æ·»åŠ æ–°ç¬”è®°é¡µé¢

**å…¥å£**: ç‚¹å‡» Tabs æ å³ç«¯çš„ç°è‰² `+` æŒ‰é’®ï¼ˆç±»ä¼¼æµè§ˆå™¨æ–°å»ºæ ‡ç­¾é¡µï¼‰

**äº¤äº’æµç¨‹**:

1. **ç‚¹å‡» + æŒ‰é’®** â†’ å¼¹å‡ºæ¨¡æ¿é€‰æ‹©å¯¹è¯æ¡†
2. **é€‰æ‹©æç¤ºè¯æ¨¡æ¿** â†’ ç³»ç»ŸåŸºäºè½¬å†™æ–‡æœ¬ç”Ÿæˆå†…å®¹
3. **æ–° Tab è‡ªåŠ¨åˆ›å»º** â†’ æ˜¾ç¤ºç”Ÿæˆçš„å†…å®¹

**æ¨¡æ¿é€‰æ‹©å¯¹è¯æ¡†**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©æç¤ºè¯æ¨¡æ¿ç”Ÿæˆæ–°ç¬”è®°              [Ã—]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç³»ç»Ÿæ¨¡æ¿] [æˆ‘çš„æ¨¡æ¿] [æœ€è¿‘ä½¿ç”¨]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸ“‹       â”‚  â”‚ âœ…       â”‚  â”‚ ğŸ“Š       â”‚          â”‚
â”‚  â”‚ è¡ŒåŠ¨é¡¹    â”‚  â”‚ å¾…åŠæ¸…å•  â”‚  â”‚ æ•°æ®åˆ†æ  â”‚          â”‚
â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚  â”‚ ç³»ç»Ÿæ¨¡æ¿  â”‚  â”‚ æˆ‘çš„æ¨¡æ¿  â”‚          â”‚
â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                     â”‚
â”‚  [æµè§ˆæ‰€æœ‰æ¨¡æ¿...]                                   â”‚
â”‚                                                     â”‚
â”‚  [å–æ¶ˆ]                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°ä»£ç **:

```typescript
// ç‚¹å‡» + æŒ‰é’®
function handleAddNewTab() {
  setShowTemplateSelector(true);
}

// é€‰æ‹©æ¨¡æ¿åç”Ÿæˆæ–°ç¬”è®°
async function generateNewNote(template: PromptTemplate) {
  // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
  showLoading('æ­£åœ¨ç”Ÿæˆ...');
  
  // è°ƒç”¨ API ç”Ÿæˆå†…å®¹ï¼ˆå’Œç”Ÿæˆçºªè¦æµç¨‹ç›¸åŒï¼‰
  const response = await api.generateArtifact(taskId, template.artifact_type, {
    prompt_instance: {
      template_id: template.template_id,
      language: 'zh-CN',
      parameters: {},
    },
  });
  
  // åˆ›å»ºæ–° Tab
  const newTab = {
    id: `tab_${Date.now()}`,
    title: template.title,
    type: 'custom',
    content: response.content,
    template_id: template.template_id,
    is_modified: false,
  };
  
  setTabs([...tabs, newTab]);
  setActiveTab(newTab.id);
  hideLoading();
}
```

**Tab æ ç¤ºä¾‹**:

```
[é€å­—ç¨¿] [ä¼šè®®çºªè¦] [è¡ŒåŠ¨é¡¹æ¸…å•] [æŠ€æœ¯åˆ†æ] [+]
                                              â†‘
                                         ç‚¹å‡»æ·»åŠ æ–°ç¬”è®°
```

**ä½¿ç”¨åœºæ™¯**:
- åŸºäºåŒä¸€ä»½è½¬å†™æ–‡æœ¬ï¼Œä½¿ç”¨ä¸åŒæ¨¡æ¿ç”Ÿæˆå¤šç§å†…å®¹
- ä¾‹å¦‚ï¼šä¼šè®®çºªè¦ + è¡ŒåŠ¨é¡¹æ¸…å• + æŠ€æœ¯å†³ç­–æ–‡æ¡£
- æ¯ä¸ª Tab ç‹¬ç«‹ç¼–è¾‘ï¼Œäº’ä¸å½±å“

##### ç”¨æˆ·åé¦ˆä¸éšç§

**åé¦ˆç•™è¨€æ¿**:
- ä½ç½®ï¼šç¼–è¾‘å™¨åº•éƒ¨
- ç”¨é€”ï¼šæ‰‹åŠ¨ç•™åé¦ˆæ„è§ï¼ˆé€‰å¡«ï¼‰

**éšç§ä¿æŠ¤**:
- é»˜è®¤**ä¸å‹¾é€‰** "å…è®¸ AI å­¦ä¹ æœ¬æ¬¡ä¿®æ­£"
- ç”¨æˆ·éœ€æ‰‹åŠ¨å‹¾é€‰æ‰æˆæƒæ•°æ®ç”¨äºä¼˜åŒ–
- ç¡®ä¿éšç§åˆè§„

```typescript
interface UserFeedback {
  task_id: string;
  feedback_text?: string;
  allow_ai_learning: boolean;  // é»˜è®¤ false
  submitted_at?: string;
}
```

---

### é˜¶æ®µäº”ï¼šåˆè§„æ ¡éªŒä¸äº¤ä»˜

**æ ¸å¿ƒç›®æ ‡**: è§£å†³"AI ä¹±å†™æ— äººè´Ÿè´£"çš„é—®é¢˜ï¼Œå»ºç«‹æ–‡æ¡£è´£ä»»åˆ¶

#### 5.1 æ ¡éªŒæœºåˆ¶

**ä½ç½®**: å³ä¾§çºªè¦ç¼–è¾‘å™¨ä¸‹æ–¹

**é»˜è®¤çŠ¶æ€**:
- `[ä¸€é”®å¤åˆ¶å…¨éƒ¨]` æŒ‰é’®ä¸º**ç°è‰²ä¸å¯ç”¨**

**äº¤äº’åŠ¨ä½œ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¡ å·²ç»å®Œæ•´é˜…è¯»çºªè¦å¹¶ç¡®è®¤å…³é”®å†…å®¹æ— è¯¯ â”‚
â”‚                                    â”‚
â”‚ [ä¸€é”®å¤åˆ¶å…¨éƒ¨] (ç°è‰²/ä¸å¯ç‚¹å‡»)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€å˜æ›´**:
- å‹¾é€‰åï¼ŒæŒ‰é’®å˜ä¸º**é«˜äº®**
- å‡ºç°å¾®åŠ¨æ•ˆæç¤ºå¯ç‚¹å‡»

**Dirty Check**:
- å¦‚æœç”¨æˆ·è¿”å›ä¿®æ”¹å†…å®¹
- è‡ªåŠ¨**ç½®ç°å‹¾é€‰æ¡†**
- æŒ‰é’®æ¢å¤ç°è‰²ä¸å¯ç”¨

```typescript
const [isConfirmed, setIsConfirmed] = useState(false);
const [isModified, setIsModified] = useState(false);

// ç›‘å¬å†…å®¹ä¿®æ”¹
useEffect(() => {
  if (isModified && isConfirmed) {
    setIsConfirmed(false);  // è‡ªåŠ¨å–æ¶ˆç¡®è®¤
  }
}, [isModified]);

// å¤åˆ¶æŒ‰é’®çŠ¶æ€
const canCopy = isConfirmed && !isModified;
```

#### 5.2 æ³¨å…¥æ°´å°ä¸å‰ªè´´æ¿å¤„ç†

**è§¦å‘**: ç‚¹å‡»é«˜äº®çš„ `[ä¸€é”®å¤åˆ¶å…¨éƒ¨]` æŒ‰é’®

**åå°æ‰§è¡Œ**ï¼ˆæ¯«ç§’çº§ï¼‰:

**æ­¥éª¤ A - æ³¨å…¥è´£ä»»å¤´**:
åœ¨ Markdown å†…å®¹æœ€é¡¶ç«¯æ‹¼æ¥å£°æ˜

```markdown
---
ğŸ“‹ ä¼šè®®çºªè¦
ç”Ÿæˆæ—¶é—´ï¼š2026-01-16 14:30:00
è´£ä»»äººï¼šå¼ ä¸‰ï¼ˆç ”å‘éƒ¨ï¼‰
AI å£°æ˜ï¼šæœ¬çºªè¦ç”± AI è¾…åŠ©ç”Ÿæˆï¼Œå·²ç»äººå·¥å®¡æ ¸ç¡®è®¤
---

# ä¼šè®®çºªè¦

## ä¼šè®®æ¦‚è¦
...
```

```typescript
function injectResponsibilityHeader(content: string, user: User): string {
  const header = `---
ğŸ“‹ ä¼šè®®çºªè¦
ç”Ÿæˆæ—¶é—´ï¼š${new Date().toLocaleString('zh-CN')}
è´£ä»»äººï¼š${user.name}ï¼ˆ${user.department}ï¼‰
AI å£°æ˜ï¼šæœ¬çºªè¦ç”± AI è¾…åŠ©ç”Ÿæˆï¼Œå·²ç»äººå·¥å®¡æ ¸ç¡®è®¤
---

`;
  return header + content;
}
```

**æ­¥éª¤ B - å›¾ç‰‡å†…è”**:
ç¡®ä¿æ‰€æœ‰å›¾ç‰‡å·²è½¬ä¸º Base64 ç¼–ç åµŒå…¥

```typescript
async function inlineImages(markdown: string): Promise<string> {
  // æŸ¥æ‰¾æ‰€æœ‰å›¾ç‰‡å¼•ç”¨
  const imageRegex = /!\[([^\]]*)\]\(([^)]+)\)/g;
  let result = markdown;
  
  const matches = [...markdown.matchAll(imageRegex)];
  for (const match of matches) {
    const [fullMatch, alt, url] = match;
    
    // å¦‚æœæ˜¯ URLï¼Œè½¬æ¢ä¸º Base64
    if (url.startsWith('http')) {
      const base64 = await urlToBase64(url);
      result = result.replace(fullMatch, `![${alt}](${base64})`);
    }
  }
  
  return result;
}
```

**æ­¥éª¤ C - å†™å…¥å‰ªè´´æ¿**:
```typescript
async function copyToClipboard() {
  // 1. æ³¨å…¥è´£ä»»å¤´
  let content = injectResponsibilityHeader(
    currentContent,
    currentUser
  );
  
  // 2. å›¾ç‰‡å†…è”
  content = await inlineImages(content);
  
  // 3. å†™å…¥å‰ªè´´æ¿
  await navigator.clipboard.writeText(content);
  
  // 4. Toast æç¤º
  showToast('âœ… å·²å¤åˆ¶ï¼è¯·åˆ‡æ¢è‡³ä¼å¾®æ–‡æ¡£æŒ‰ Ctrl+V ç²˜è´´');
  
  // 5. è®°å½•æ“ä½œæ—¥å¿—
  await api.logCopyAction(taskId, {
    user_id: currentUser.id,
    confirmed: true,
    timestamp: new Date().toISOString(),
  });
}
```

#### 5.3 æœ€ç»ˆç²˜è´´

**ç›®æ ‡å¹³å°**: ä¼ä¸šå¾®ä¿¡æ–‡æ¡£ï¼ˆWeDocï¼‰

**æ“ä½œ**: æŒ‰ä¸‹ `Ctrl+V`

**æ•ˆæœ**: æ ¼å¼å®Œç¾ä¸”æƒè´£æ¸…æ™°çš„æ–‡æ¡£å³åˆ»ä¸Šå±

---

## ğŸ¨ UI/UX è®¾è®¡è¦ç‚¹

### 1. å“åº”å¼è®¾è®¡
- æ¡Œé¢ç«¯ï¼šå·¦å³åˆ†å±ï¼ˆ6:4 æ¯”ä¾‹ï¼‰
- å¹³æ¿ç«¯ï¼šä¸Šä¸‹åˆ†å±æˆ– Tabs åˆ‡æ¢
- ç§»åŠ¨ç«¯ï¼šä»…æ˜¾ç¤ºçºªè¦ï¼ˆé€å­—ç¨¿æŠ˜å ï¼‰

### 2. äº¤äº’åé¦ˆ
- æ‹–æ‹½ä¸Šä¼ ï¼šæ˜¾ç¤ºæ‹–æ‹½åŒºåŸŸé«˜äº®
- æ–‡ä»¶æ’åºï¼šæ‹–æ‹½æ—¶æ˜¾ç¤ºæ’å…¥ä½ç½®
- éŸ³é¢‘è·³è½¬ï¼šç‚¹å‡»æ—¶é—´æˆ³æœ‰è§†è§‰åé¦ˆ
- è¯´è¯äººä¿®æ­£ï¼šæ°”æ³¡èœå•åŠ¨ç”»
- ç¡®è®¤å‹¾é€‰ï¼šå¾®åŠ¨æ•ˆæç¤º
- å¤åˆ¶æˆåŠŸï¼šToast æç¤º

### 3. æ€§èƒ½ä¼˜åŒ–
- éŸ³é¢‘æ³¢å½¢å›¾ï¼šä½¿ç”¨ Canvas æ¸²æŸ“
- é•¿æ–‡æœ¬ï¼šè™šæ‹Ÿæ»šåŠ¨
- å›¾ç‰‡ï¼šæ‡’åŠ è½½
- è‡ªåŠ¨ä¿å­˜ï¼šé˜²æŠ– 3 ç§’

### 4. é”™è¯¯å¤„ç†
- ä¸Šä¼ å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯åŸå› ï¼Œæ”¯æŒé‡è¯•
- å¤„ç†å¤±è´¥ï¼šä¼å¾®é€šçŸ¥ + é¡µé¢æç¤º
- ç½‘ç»œæ–­å¼€ï¼šæœ¬åœ°ç¼“å­˜ï¼Œæ¢å¤ååŒæ­¥

---

## ğŸ“Š æ•°æ®æµè½¬

```
å½•éŸ³ç¬” â†’ USB â†’ æœ¬åœ°æ–‡ä»¶
  â†“
æ‹–æ‹½ä¸Šä¼  â†’ å‰ç«¯æš‚å­˜
  â†“
ç‚¹å‡»"å¼€å§‹æ•´ç†" â†’ ä¸Šä¼ åˆ°æœåŠ¡å™¨
  â†“
åå°å¤„ç†ï¼ˆASR â†’ å£°çº¹ â†’ LLMï¼‰
  â†“
ä¼å¾®é€šçŸ¥ â† å¤„ç†å®Œæˆ
  â†“
æ‰“å¼€å·¥ä½œå° â† ç‚¹å‡»é“¾æ¥
  â†“
å·¦ä¾§ï¼šé€å­—ç¨¿ + éŸ³é¢‘
å³ä¾§ï¼šAI çºªè¦
  â†“
äººå·¥æ ¡å¯¹ä¸ä¿®æ­£
  â†“
å‹¾é€‰ç¡®è®¤ â†’ ä¸€é”®å¤åˆ¶
  â†“
ç²˜è´´åˆ°ä¼å¾®æ–‡æ¡£ â†’ å®Œæˆ
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **API æ¥å£**: `docs/FRONTEND_DEVELOPMENT_GUIDE.md`
- **åŠŸèƒ½æ¸…å•**: `docs/FRONTEND_FEATURE_CHECKLIST.md`
- **å®æ–½è·¯çº¿å›¾**: `docs/FRONTEND_IMPLEMENTATION_ROADMAP.md`

---

**ç»´æŠ¤è€…**: å‰ç«¯å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2026-01-16
